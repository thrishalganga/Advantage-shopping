public  class Castandcrewcall {     public Response CallCastAndCrewRail(String stmsid ) {         String s = "TMS-";         Map queryParams = new HashMap<>();         queryParams.put("pi", "0");         queryParams.put("ps", "20");         queryParams.put("idType", "TMS");         queryParams.put("Id", "stmsid");         queryParams.put("qualifiedId", s.concat("stmsid"));         anApiCallFor("CastAndCrewRail");         Map<String, String> headers = new HashMap<>();         headers.put("authorization", GlobalCache.get("authtoken").toString());         headers.put("accountid", GlobalCache.get("accountIdHash").toString());         headers.put("dt", GlobalCache.get("dt").toString());         headers.put("x-transaction-id", UUID.randomUUID().toString());         headers.put("portalId", GlobalCache.get("prt").toString());         headers.put("pt", GlobalCache.get("pt").toString());         headers.put("av", "6.0");         headers.put("rv", "6.0");         headers.put("Content-Type", "application/json");         headers.put("did", GlobalCache.get("deviceIdHash").toString());         apiInfo.setQueryParams(queryParams);         apiInfo.setTokenizedHeader(headers);         api_call_is_made_for("CastAndCrewRail");         return (Response) GlobalCache.get("API_RESPONSE");              }              }  @Given("Fetch TVOD Series & Episode STMS IDs from Sherpa") public void fetchTVODSeriesEpisodeSTMSIDsFromSherpa() {     String yamlFileNameOfApi = "SherpaGetProgram";     aCallToTheApi(yamlFileNameOfApi, null, null);     Response response = (Response) GlobalCache.get("API_RESPONSE");     ArrayList<HashMap<String, String>> TVODEpisodeSherpadata = response.jsonPath().get("hits.hits.fields");     for (HashMap<String,String> TVODIds : TVODEpisodeSherpadata){         if(TVODIds.containsKey("stmsid")){             Response castandcrewresponse = CallCastAndCrewRail(TVODIds.get("stmsid"));         }     } }
